---------------
Problem 13.
Solve the production problem, but now instead of optimizing for revenue, optimize for profit.
The profit is the difference between total revenue from products, and total costs of raw materials
consumed for production. The cost for each raw material is proportional to the material consumed,
and is independent of which product it is used for. A single unit cost for each raw material is given.

58

5.4. RAW MATERIAL COSTS AND PROFIT

PRODUCTION PROBLEM

This is the general description for the problem. Again, we use an example for demonstration,
which includes costs for raw materials as well. Other data of the example problem remains the same
as before.

Problem 14.
Solve the production problem with the objective of maximized profit, where problem data are the
following, with unit costs of raw materials added.

A
B
C
D
Revenue

P1
200 kWh
25 h
3200 kg
1
252 $

P2
50 kWh
180 h
1000 kg
1
89 $

P3
0 kWh
75 h
4500 kg
1
139 $

Available
23000 kWh
31000 h
450000 kg
200

Cost
1$
0.07 $
0.0013 $
8$

Also, there are three limitations, as before.
• Use at least 20000 h of working time (raw material B).
• Fill the production quota: produce at least 200 units (raw material D), which is actually also
the maximum for that raw material.
• Produce at most 10 units of P3.
Again, we want to write a general model, and a separate, corresponding data section for the
particular example problem. The starting point is the model and data sections we obtained by
solving Problem 11, where the limits were introduced, as both the model and data sections are
almost ready, we only need to implement some modifications.
First, we definitely need a new parameter that describes the costs. Let us call this parameter
Material_Cost. We can simply add it to the model section. No other data is needed.
Before going on, let us observe what happens when material costs are zero. This means that our
problem is the same as the original, where raw materials were free. This means that the current
problem with raw material costs is a generalization of the original problem. Or, in other words,
the original problem is a special case of the current problem with raw material costs all being zero.
For this reason, it is sensible to give a zero default value to material costs. This makes data files
implemented for the original problem compatible with our new model as well.
param Material_Cost {r in Raw_Materials}, >=0, default 0;
We also know the corresponding data, which can be implemented in the data section. Each raw
material has a nonzero cost.
param Material_Cost :=
A 1
B 0.07
C 0.013
D 8
;

59

5.4. RAW MATERIAL COSTS AND PROFIT

PRODUCTION PROBLEM

Beyond the data, the only difference in the model is the objective value. We could just change
the line and our model would be complete. However, for more readability, we introduce an auxiliary
variable for the profit and use it instead. The modified part of the model section is the following.
Only three lines of code changed: the profit variable was introduced, the objective changed, and
the Profit_Calc constraint was added to ensure that the profit variable obtain the corresponding
value. We also print it after the solve statement.
var production {p in Products}, >=Min_Production[p], <=Max_Production[p];
var usage {r in Raw_Materials}, >=Min_Usage[r], <=Storage[r];
var total_revenue;
var profit;
s.t. Usage_Calc {r in Raw_Materials}:
sum {p in Products} Consumption_Rate[r,p] * production[p] = usage[r];
s.t. Total_Revenue_Calc: total_revenue =
sum {p in Products} Revenue[p] * production[p];
s.t. Profit_Calc: profit = total_revenue sum {r in Raw_Materials} Material_Cost[r] * usage[r];
maximize Profit: profit;
solve;
printf "Total Revenue: %g\n", total_revenue;
printf "Profit: %g\n", profit;
Now both the model and the data sections are ready. If we optimize for profit now, we get the
following result.
Total Revenue: 22453.9
Profit: 1577.45
Production of P1: 25.4839
Production of P2: 164.516
Production of P3: 10
Usage of A: 13322.6, remaining: 9677.42
Usage of B: 31000, remaining: 0
Usage of C: 291065, remaining: 158935
Usage of D: 200, remaining: 0
Now let us investigate this solution a bit. Now, it is true that the search space of the problem
did not change in logic: exactly the same solutions are feasible in both the original problem where
revenue is maximized, and the current problem where profit is maximized. This explains the total
revenues. In the original problem, the optimal (maximal) total revenue was 32970, it was obtained
by producing 90 units of P1, 100 units of P2 and 10 units of P3. However, if we optimize for profit
instead, we get a total revenue of 22453.87, which is worse. The profit in this case is much smaller,
1577.45, so most of the revenue is diminished by raw material costs. The production is also slightly
different, now 25.48 units of P1, 164.52 units of P2 and 10 units of P3 are produced.
Although the revenue is significantly higher for the original solution than for the current, we can
now be sure that the profit is no more than 1577.45 in that case either.

60

5.5. DIET PROBLEM

5.5

PRODUCTION PROBLEM

Diet problem

We have seen several versions for the production problem. Now a seemingly unrelated problem is
considered, which is called the diet problem [13, 14], or the nutrition problem.
