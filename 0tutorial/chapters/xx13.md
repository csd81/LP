

## Problem 13.

Solve the production problem, but now instead of optimizing for revenue, optimize for **profit**. The profit is defined as the difference between the **total revenue** from products and the **total cost** of raw materials consumed for production. The cost for each raw material is proportional to the material consumed and is independent of which product it is used for. A single **unit cost** for each raw material is given.

This is the general description of the problem. We will again use an example for demonstration, which includes costs for raw materials. The other data for the example problem remain the same as before.

-----

### Problem 14.

Solve the production problem with the objective of **maximized profit**, using the following problem data, with unit costs of raw materials added.

| | **P1** | **P2** | **P3** | **Available** | **Cost (per unit)** |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **A** (electricity) | 200 kWh | 50 kWh | 0 kWh | 23000 kWh | **$1** |
| **B** (working time) | 25 h | 180 h | 75 h | 31000 h | **$0.07** |
| **C** (materials) | 3200 kg | 1000 kg | 4500 kg | 450000 kg | **$0.013** |
| **D** (production quota) | 1 | 1 | 1 | 200 | **$8** |
| **Revenue (per unit)** | **$252** | **$89** | **$139** | | |

Additionally, there are three limitations, as before:

  * Use at least **20,000 h** of working time (raw material B).
  * Fill the production quota: produce at least **200 units** (raw material D), which also happens to be the maximum for that raw material.
  * Produce at most **10 units of P3**.

Again, we want to write a general model and a separate, corresponding data section for the particular example problem. The starting point is the model and data sections we obtained by solving **Problem 11**, where the limits were introduced, as both the model and data sections are almost ready; we only need to implement some modifications.

First, we definitely need a new parameter that describes the costs. Let's call this parameter `Material_Cost`. We can simply add it to the model section. No other data is needed.

Before proceeding, let's observe what happens when material costs are zero. This means our problem is the same as the original, where raw materials were free. This means that the current problem with raw material costs is a **generalization** of the original problem. In other words, the original problem is a **special case** of the current problem where all raw material costs are zero. For this reason, it is sensible to give a **zero default value** to material costs. This makes data files implemented for the original problem compatible with our new model as well.

```
param Material_Cost {r in Raw_Materials}, >=0, default 0;
```

We also know the corresponding data, which can be implemented in the data section. Each raw material has a nonzero cost.

```
param Material_Cost :=
A 1
B 0.07
C 0.013
D 8
;
```

Beyond the data, the only difference in the model is the **objective value**. We could simply change the objective line and our model would be complete. However, for better readability, we will introduce an **auxiliary variable** for the profit and use it instead. The modified part of the model section is the following. Only three lines of code changed: the `profit` variable was introduced, the objective changed, and the `Profit_Calc` constraint was added to ensure that the `profit` variable obtains the corresponding value. We also print it after the `solve` statement.

```
var production {p in Products}, >=Min_Production[p], <=Max_Production[p];
var usage {r in Raw_Materials}, >=Min_Usage[r], <=Storage[r];
var total_revenue;
var profit;
s.t. Usage_Calc {r in Raw_Materials}:
sum {p in Products} Consumption_Rate[r,p] * production[p] = usage[r];
s.t. Total_Revenue_Calc: total_revenue =
sum {p in Products} Revenue[p] * production[p];
s.t. Profit_Calc: profit = total_revenue - sum {r in Raw_Materials} Material_Cost[r] * usage[r];
maximize Profit: profit;
solve;
printf "Total Revenue: %g\n", total_revenue;
printf "Profit: %g\n", profit;
```

Now both the model and the data sections are ready. If we optimize for profit now, we get the following result.

```
Total Revenue: 22453.9
Profit: 1577.45
Production of P1: 25.4839
Production of P2: 164.516
Production of P3: 10
Usage of A: 13322.6, remaining: 9677.42
Usage of B: 31000, remaining: 0
Usage of C: 291065, remaining: 158935
Usage of D: 200, remaining: 0
```

Now let's examine this solution briefly. Logically, the **search space** of the problem did not change: exactly the same solutions are **feasible** in both the original problem (where revenue is maximized) and the current problem (where profit is maximized). This explains the difference in total revenues. In the original problem, the optimal (maximal) total revenue was **$32,970**, achieved by producing 90 units of P1, 100 units of P2, and 10 units of P3. However, when we optimize for **profit** instead, we get a total revenue of **$22,453.87**, which is worse. The profit in this case is much smaller, **$1,577.45**, meaning most of the revenue is diminished by raw material costs. The production is also slightly different: 25.48 units of P1, 164.52 units of P2, and 10 units of P3 are now produced.

Although the revenue is significantly higher for the original solution than for the current one, we can now be certain that the profit would be no more than **$1,577.45** in that case either.

-----

### 5.5 Diet Problem

We have seen several versions of the production problem. Now, a seemingly unrelated problem is considered, which is called the **diet problem** [13, 14], or the **nutrition problem**.

-----

