---------------
Problem 18.
Solve Problem 14, the original production problem, where data are exactly the same, but there
are two other options for production.
• P1 and P2 can be produced jointly, with slightly different consumption amounts than separately.
Producing one unit of both products requires 240 units of raw material A (instead of 250 when
done separately), 200 units of raw material B (instead of 205 when done separately), 4400 units
of raw material C (slightly more than 4200 when done separately), and 2 units of raw material
D (exactly as if done separately).
• Similarly, P2 and P3 can also be produced jointly. The costs are 51 units of raw material A
(slightly more than 50 when done separately), 250 units of raw material B (instead of 255 when
done separately), and 5400 units of raw material C (instead of 5500 when done separately),
and 2 units of raw material D (exactly as if done separately).
This problem can be solved by the manipulation of the data section of the original problem.
We have to add two additional recipes to the Recipes set, then two rows to the Recipe_Ratios
parameter to describe these two new recipes. The data section and the results are the following.
data;
set Raws := A B C D;
set Products := P1 P2 P3;
set Recipes := MakeP1 MakeP2 MakeP3 Comp1 Comp2;
param Min_Usage :=
B 21000
D 200

73

5.6. ARBITRARY RECIPES

P2
;

PRODUCTION PROBLEM

100

param Max_Usage :=
A 23000
B 31000
C 450000
D 200
P3 10
;
param Value :=
A 1
B 0.07
C 0.013
D 8
P1 252
P2 89
P3 139
;
param Recipe_Ratio:
A
B
MakeP1 200
25
MakeP2
50 180
MakeP3
0
75
Comp1
240 200
Comp2
51 250
;

C
3200
1000
4500
4400
5400

D
1
1
1
2
2

P1
1
0
0
1
0

P2
0
1
0
1
1

P3 :=
0
0
1
0
1

end;

Total Costs: 30495
Total Revenue: 32460.6
Profit: 1965.62
Volume of recipe MakeP1: 0
Volume of recipe MakeP2: 6.25
Volume of recipe MakeP3: 0
Volume of recipe Comp1: 86.875
Volume of recipe Comp2: 10
Consumption of raw A: 21672.5
Consumption of raw B: 21000
Consumption of raw C: 442500
Consumption of raw D: 200
Production of product P1: 86.875
Production of product P2: 103.125
Production of product P3: 10
Now it turns out that the optimal solution is 1965.62, which is a bit better than the original
1577.45. This is due to the fact that the modification was only the addition of new opportunities
74

5.7. ORDER FULFILLMENT

PRODUCTION PROBLEM

to the production, so the search space was widened. We can also see that Comp1 and Comp2, which
are the recipes for the joint production methods, are used as an alternative instead of the original
options. There is still a little 6.25 units P2 produced alone, though. The total production is also
slightly different in this solution, with 86.88 units of P1, 103.13 units of P2 and 10 units of P3.

5.7

Order fulfillment

Now, we have a complete model for the production problem of arbitrary recipes, with which we can
easily implement and solve a wide range of problems, including the diet problem. We further extend
the model with a new feature, which has practical importance: orders. These allow to buy and sell
materials in a bulk, which is possibly a more lucrative option but can only be acquired entirely or
ignored at all.
So far in the production problem topic, we only had real-valued variables, therefore the models
were all LP models. Now, we will have integer variables, making the model an MILP model. We must
note that MILP models can be easily implemented, but the solution procedure can be unacceptably
long if there are too many binary variables. The limit on what is considered too many depends on
the model: in some problems we can only have several dozens of integer variables, while sometimes
several hundreds or even thousands will be working. Anyways, this limit is definitely lower than for
the number of ordinary real-valued variables in LP models. Unfortunately in many situations, the
limitations can only slightly be pushed up by choosing stronger equipment, better solver or modeling
techniques, because integer programming is an NP-Complete problem. Nevertheless, using integer
variables is a very powerful modeling tool, which allows a significantly wider range of problems to
be possibly modeled by MILP than those by LP.
We will see an example how a GNU MathProg model can be extended by new features while
maintaining compatibility with old data files. We will see how we can filter in an indexing
expression in GNU MathProg.
An order is a fixed amount of several raw materials that are purchased and/or products which
are sold when ready by the producing party. An order can also either cost money, or gain income
as money, and payment may happen either before or after all the production takes place. The same
order may be served multiple times.
The general problem definition for arbitrary recipes and order fulfillment is the following.
